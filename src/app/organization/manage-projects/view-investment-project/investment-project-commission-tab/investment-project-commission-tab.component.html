<div class="container" style="margin-top: 16px;">
  <form [formGroup]="adicionalForm" fxLayout="column" fxLayoutGap="16px">
    <div fxLayout="row" fxLayoutGap="16px" fxLayoutAlign="start center">

      <mat-form-field appearance="fill" fxFlex style="margin-top: 16px;">
        <mat-label>Tipo de comisión</mat-label>
        <mat-select formControlName="commissionTypeId" required>
          <mat-option *ngFor="let type of commissionToShow" [value]="type.id">
            {{ type.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" fxFlex>
        <mat-label>Descripción</mat-label>
        <input matInput formControlName="description" required />
      </mat-form-field>

      <mat-form-field appearance="fill" fxFlex>
        <mat-label>Monto neto</mat-label>
        <input matInput type="number" formControlName="netAmount" required />
      </mat-form-field>

      <mat-form-field appearance="fill" fxFlex>
        <mat-label>Porcentaje</mat-label>
        <input matInput type="number" formControlName="vat"/>
      </mat-form-field>

      <button mat-raised-button color="primary" (click)="calcularComision()"
        [disabled]="!isITESelected() && adicionalForm.invalid">
        Agregar
      </button>
    </div>
  </form>

  <div fxLayout="column" style="margin-top: 24px;">
    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="32px">
      <div><strong>Monto a Financiar:</strong> ${{ getMontoAFinanciar() | currency:currency }}</div>
      <div><strong>Monto a Entregar:</strong> ${{ getMontoAEntregar() | currency:currency }}</div>
    </div>
  </div>

  <!-- Tabla de comisiones -->
  <table mat-table [dataSource]="comisiones" class="mat-elevation-z8" style="margin-top: 16px;">
    <ng-container matColumnDef="commissionType">
      <th mat-header-cell *matHeaderCellDef> Tipo </th>
      <td mat-cell *matCellDef="let element"> {{ element.commissionType.name }} </td>
    </ng-container>

    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef> Descripción </th>
      <td mat-cell *matCellDef="let element"> {{ element.description }} </td>
    </ng-container>

    <ng-container matColumnDef="netAmount">
      <th mat-header-cell *matHeaderCellDef> Neto </th>
      <td mat-cell *matCellDef="let element"> ${{ element.netAmount | currency:currency }} </td>
    </ng-container>

    <ng-container matColumnDef="vat">
      <th mat-header-cell *matHeaderCellDef> IVA </th>
      <td mat-cell *matCellDef="let element"> {{ element.vat}} % </td>
    </ng-container>

    <ng-container matColumnDef="total">
      <th mat-header-cell *matHeaderCellDef> Total </th>
      <td mat-cell *matCellDef="let element"> ${{ element.total | currency:currency}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

  </table>

  <!-- Botones -->
  <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="16px" style="margin-top: 16px;">
    <button mat-raised-button color="primary" (click)="submit()" [disabled]="projectData?.status?.statusValue?.name !== 'En Borrador' ">
      Guardar
    </button>
  </div>

</div>