<div class="container">
  <div fxLayout="row" fxLayoutAlign="end" fxLayoutGap="2%" fxLayout.lt-md="column" class="container m-b-20">
    <section *ngIf="!router.url.includes('edit')">
      <button
        mat-raised-button
        color="primary"
        [matMenuTriggerFor]="actionsMenu"
        [attr.aria-label]="'Acciones'"
        (click)="$event.stopPropagation()"
        [id]="'actions-menu-button'"
      >
        <mat-icon>menu</mat-icon>
      </button>

      <!-- Menú -->
      <mat-menu #actionsMenu="matMenu">
        <!-- Ver historial -->
        <button
          mat-menu-item
          [id]="'view-status-history-button'"
          [routerLink]="['../', 'statusHistory', projectData?.id]"
          (click)="$event.stopPropagation()"
        >
          <mat-icon>history</mat-icon>
          <span>{{ 'labels.buttons.View Status History' | translate }}</span>
        </button>

        <!-- Ver proyecto (solo en estados específicos) -->
        <a
          mat-menu-item
          *ngIf="
            projectData?.status?.statusValue?.name === 'En Formalización' ||
            projectData?.status?.statusValue?.name === 'En Financiamiento' ||
            projectData?.status?.statusValue?.name === 'En curso'
          "
          [id]="'view-project-button'"
          [href]="setProjectUrl(projectData)"
          target="_blank"
          rel="noopener"
          (click)="$event.stopPropagation()"
        >
          <mat-icon>open_in_new</mat-icon>
          <span>{{ 'labels.buttons.View Project' | translate }}</span>
        </a>

        <!-- Ver participaciones -->
        <button
          mat-menu-item
          [id]="'view-participations-button'"
          (click)="$event.stopPropagation(); goToParticipations(projectData?.id)"
        >
          <mat-icon>groups</mat-icon>
          <span>{{ 'tooltips.View Participations' | translate }}</span>
        </button>
        <button mat-menu-item [routerLink]="['./edit']" [id]="'edit button'" (click)="$event.stopPropagation()">
          <mat-icon>edit</mat-icon>
          <span> {{ 'labels.buttons.Edit' | translate }} {{ 'labels.inputs.Proyect' | translate }} </span>
        </button>
      </mat-menu>
    </section>
  </div>
  <nav mat-tab-nav-bar class="navigation-tabs" *ngIf="!router.url.includes('edit')">
    <a
      id="general-tab"
      mat-tab-link
      [routerLink]="['./general']"
      routerLinkActive
      #general="routerLinkActive"
      [active]="general.isActive"
    >
      {{ 'labels.heading.General' | translate }}
    </a>
    <a
      id="documents-tab"
      mat-tab-link
      [routerLink]="['./documents']"
      routerLinkActive
      #documents="routerLinkActive"
      [active]="documents.isActive"
    >
      {{ 'labels.heading.Documents' | translate }}
    </a>
    <a
      id="simulations-tab"
      mat-tab-link
      [routerLink]="['./simulaciones']"
      routerLinkActive
      #simulaciones="routerLinkActive"
      [active]="simulaciones.isActive"
    >
      {{ 'labels.heading.Simulations' | translate }}
    </a>

    <a
      id="publication-tab"
      mat-tab-link
      [routerLink]="['./publicacion']"
      routerLinkActive
      #publication="routerLinkActive"
      [active]="publication.isActive"
    >
      {{ 'labels.heading.Publication' | translate }}
    </a>
    <a
      id="impact-tab"
      mat-tab-link
      [routerLink]="['./impacto']"
      routerLinkActive
      #impact="routerLinkActive"
      [active]="impact.isActive"
    >
      {{ 'labels.heading.Impact' | translate }}
    </a>
    <a
      id="investments-tab"
      mat-tab-link
      [routerLink]="['./inversiones']"
      routerLinkActive
      #investments="routerLinkActive"
      [active]="investments.isActive"
    >
      {{ 'labels.heading.investments' | translate }}
    </a>

    <a
      id="grupos-pagare-tab"
      mat-tab-link
      [routerLink]="['./grupos-pagare']"
      routerLinkActive
      #grupos="routerLinkActive"
      [active]="grupos.isActive"
    >
      Pagarés
    </a>
    <a
      id="notes-tab"
      mat-tab-link
      [routerLink]="['./notas']"
      routerLinkActive
      #notes="routerLinkActive"
      [active]="notes.isActive"
    >
      {{ 'labels.heading.Notes' | translate }}
    </a>
  </nav>
  <router-outlet></router-outlet>
</div>
